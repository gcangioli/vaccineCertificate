<?xml version="1.0" encoding="utf-8"?>
<StructureDefinition xmlns="http://hl7.org/fhir">
	<id value="smartVaccinationCertificate"/>
	<url value="http://hl7.eu/fhir/poc/svc/StructureDefinition/smartVaccinationCertificate"/>
	<name value="smartVaccinationCertificate"/>
	<title value="Smart Vaccination Certificate [LM]"/>
	<status value="draft"/>
	<experimental value="true"/>
	<description value="Logical Model representing the Smart Vaccination Certificate  Model&#xD;&#xA;This is a Proof of Concept."/>
		<jurisdiction>
		<!-- This will drive SNOMED release used -->
		<coding>
			<!-- This is the code for universal -->
		<!-- 	<system value="http://unstats.un.org/unsd/methods/m49/m49.htm"/>
			<code value="150"/>
			<display value="Europe"/> -->
			<!-- Change to this if the IG is country-specific -->
			  <system value="http://unstats.un.org/unsd/methods/m49/m49.htm"/>
			  <code value="001"/>
     
		</coding>
	</jurisdiction>
	<fhirVersion value="4.0.1"/>
	<mapping>
		<identity value="fhir-ig"/>
		<uri value="http://hl7.eu/fhir/poc/svc"/>
		<name value="Vaccination Certificate PoC FHIR Implementation Guide"/>
	</mapping>
	<kind value="logical"/>
	<abstract value="true"/>
	<type value="smartVaccinationCertificate"/>
	<baseDefinition value="http://hl7.org/fhir/StructureDefinition/Element"/>
	<derivation value="specialization"/>
	<differential>
		<element id="smartVaccinationCertificate">
			<path value="smartVaccinationCertificate"/>
			<short value="Smart Vaccination Certificate"/>
			<definition value="Smart Vaccination Certificate content"/>
			<min value="0"/>
			<max value="*"/>
			<!-- 		<mapping>
				<identity value="fhir-gk"/>
				<map value="Observation.conformsTo('http://hl7.eu/fhir/ig/gk/StructureDefinition/oxygensat')"/>
			</mapping> -->
		</element>
		<element id="smartVaccinationCertificate.subject">
			<path value="smartVaccinationCertificate.subject"/>
			<short value="Header - input once"/>
			<definition value="Header - input once"/>
			<min value="0"/>
			<max value="*"/>
			<type>
				<code value="BackboneElement"/>
			</type>
			<mapping>
				<identity value="fhir-ig"/>
				<map value="Composition.conformsTo('http://hl7.eu/fhir/poc/svc/StructureDefinition/Composition-svc').subject"/>
			</mapping>
			<mapping>
				<identity value="fhir-ig"/>
				<map value="Immunization.conformsTo('http://hl7.eu/fhir/poc/svc/StructureDefinition/Immunization-svc').patient"/>
			</mapping>
		</element>
		<element id="smartVaccinationCertificate.subject.fullName">
			<path value="smartVaccinationCertificate.subject.fullName"/>
			<short value="Name"/>
			<definition value="The legal full name of the vaccinated person"/>
			<min value="0"/>
			<max value="*"/>
			<type>
				<code value="string"/>
			</type>
			<mapping>
				<identity value="fhir-ig"/>
				<map value="Patient.conformsTo('http://hl7.org/fhir/uv/ips/StructureDefinition/Patient-uv-ips').name.text"/>
			</mapping>
		</element>
		<element id="smartVaccinationCertificate.subject.birthDate">
			<path value="smartVaccinationCertificate.subject.birthDate"/>
			<short value="Date of birth"/>
			<definition value="The individual's date of birth (DOB) if known. If unknown, use given DOB for administrative purposes."/>
			<min value="0"/>
			<max value="*"/>
			<type>
				<code value="dateTime"/>
			</type>
			<mapping>
				<identity value="fhir-ig"/>
				<map value="Patient.conformsTo('http://hl7.org/fhir/uv/ips/StructureDefinition/Patient-uv-ips').birthDate"/>
			</mapping>
		</element>
		<element id="smartVaccinationCertificate.subject.identifier">
			<path value="smartVaccinationCertificate.subject.identifier"/>
			<short value="Unique identification"/>
			<definition value="Unique identifier for the vaccinated person, according to the policies applicable to each country. (e.g. national ID, health ID, immunization information system ID, medical record ID). There can be more than one unique identifier used to link records."/>
			<min value="0"/>
			<max value="*"/>
			<type>
				<code value="Identifier"/>
			</type>
			<mapping>
				<identity value="fhir-ig"/>
				<map value="Patient.conformsTo('http://hl7.org/fhir/uv/ips/StructureDefinition/Patient-uv-ips').identifier"/>
			</mapping>
		</element>
		<element id="smartVaccinationCertificate.subject.administrativeGender">
			<path value="smartVaccinationCertificate.subject.administrativeGender"/>
			<short value="Administrative Sex"/>
			<definition value="Vaccinated person's sex for administrative purposes"/>
			<min value="0"/>
			<max value="*"/>
			<type>
				<code value="CodeableConcept"/>
			</type>
			<mapping>
				<identity value="fhir-ig"/>
				<map value="Patient.conformsTo('http://hl7.org/fhir/uv/ips/StructureDefinition/Patient-uv-ips').gender"/>
			</mapping>
		</element>
				<element id="smartVaccinationCertificate.vaccination">
			<path value="smartVaccinationCertificate.vaccination"/>
			<short value="Data needed for each vaccination event"/>
			<definition value="Data needed for each vaccination event"/>
			<min value="0"/>
			<max value="*"/>
			<type>
				<code value="BackboneElement"/>
			</type>
			<mapping>
				<identity value="fhir-ig"/>
				<map value="Immunization.conformsTo('http://hl7.eu/fhir/poc/svc/StructureDefinition/Immunization-svc')"/>
			</mapping>
		</element>
		<element id="smartVaccinationCertificate.vaccination.vaccineCode">
			<path value="smartVaccinationCertificate.vaccination.vaccineCode"/>
			<short value="Vaccine or prophylaxis"/>
			<definition value="Generic description of the vaccine or vaccine sub-type. e.g. Covid-19 mRNA vaccine, HPV vaccine"/>
			<min value="0"/>
			<max value="*"/>
			<type>
				<code value="CodeableConcept"/>
			</type>
			<mapping>
				<identity value="fhir-ig"/>
				<map value="Immunization.conformsTo('http://hl7.eu/fhir/poc/svc/StructureDefinition/Immunization-svc').vaccineCode"/>
			</mapping>
		</element>
		<element id="smartVaccinationCertificate.vaccination.vaccineBrandName">
			<path value="smartVaccinationCertificate.vaccination.vaccineBrandName"/>
			<short value="Vaccine brand"/>
			<definition value="The brand or trade name used to refer to the vaccination."/>
			<min value="0"/>
			<max value="*"/>
			<type>
				<code value="string"/>
			</type>
			<mapping>
				<identity value="fhir-ig"/>
				<map value="Immunization.conformsTo('http://hl7.eu/fhir/poc/svc/StructureDefinition/Immunization-svc').vaccineCode.text"/>
			</mapping>
		</element>
		<element id="smartVaccinationCertificate.vaccination.vaccineManufacturer">
			<path value="smartVaccinationCertificate.vaccination.vaccineManufacturer"/>
			<short value="Vaccine manufacturer"/>
			<definition value="Name of the manufacturer of the vaccine. e.g. Pfizer, Sanofi, GlaxoSmithKline."/>
			<min value="0"/>
			<max value="*"/>
			<type>
				<code value="string"/>
			</type>
			<mapping>
				<identity value="fhir-ig"/>
				<map value="Immunization.conformsTo('http://hl7.eu/fhir/poc/svc/StructureDefinition/Immunization-svc').manufacturer"/>
			</mapping>
		</element>
		<element id="smartVaccinationCertificate.vaccination.vaccineBatchNumber">
			<path value="smartVaccinationCertificate.vaccination.vaccineBatchNumber"/>
			<short value="Batch number of vaccine or prophylaxis"/>
			<definition value="Batch number or lot number of vaccine or prophylaxis"/>
			<min value="0"/>
			<max value="*"/>
			<type>
				<code value="string"/>
			</type>
			<mapping>
				<identity value="fhir-ig"/>
				<map value="Immunization.conformsTo('http://hl7.eu/fhir/poc/svc/StructureDefinition/Immunization-svc').lotNumber"/>
			</mapping>
		</element>
		<element id="smartVaccinationCertificate.vaccination.date">
			<path value="smartVaccinationCertificate.vaccination.date"/>
			<short value="Date of vaccination"/>
			<definition value="Date in which the vaccine was provided."/>
			<min value="0"/>
			<max value="*"/>
			<type>
				<code value="dateTime"/>
			</type>
			<mapping>
				<identity value="fhir-ig"/>
				<map value="Immunization.conformsTo('http://hl7.eu/fhir/poc/svc/StructureDefinition/Immunization-svc').occurrenceDatetime"/>
			</mapping>
		</element>
		<element id="smartVaccinationCertificate.vaccination.doseNumber">
			<path value="smartVaccinationCertificate.vaccination.doseNumber"/>
			<short value="Dose"/>
			<definition value="Vaccine dose number"/>
			<min value="0"/>
			<max value="*"/>
			<type>
				<code value="Quantity"/>
			</type>
			<mapping>
				<identity value="fhir-ig"/>
				<map value="Immunization.conformsTo('http://hl7.eu/fhir/poc/svc/StructureDefinition/Immunization-svc').protocolApplied.doseNumber[x]"/>
			</mapping>
			<mapping>
				<identity value="fhir-ig"/>
				<map value="Immunization.conformsTo('http://hl7.eu/fhir/poc/svc/StructureDefinition/Immunization-svc').protocolApplied.seriesDoses[x]"/>
			</mapping>
		</element>
		<element id="smartVaccinationCertificate.vaccination.administeringCentre">
			<path value="smartVaccinationCertificate.vaccination.administeringCentre"/>
			<short value="Administering centre"/>
			<definition value="The name or identifier of the vaccination facility responsible for providing the vaccination"/>
			<min value="0"/>
			<max value="*"/>
			<type>
				<code value="CodeableConcept"/>
			</type>
			<mapping>
				<identity value="fhir-ig"/>
				<map value="Immunization.conformsTo('http://hl7.eu/fhir/poc/svc/StructureDefinition/Immunization-svc').performer"/>
			</mapping>
		</element>
		<element id="smartVaccinationCertificate.vaccination.healthWorkerSignature">
			<path value="smartVaccinationCertificate.vaccination.healthWorkerSignature"/>
			<short value="Signature of health worker"/>
			<definition value="The health worker who provided the vaccination or the supervising clinician's hand written signature or digital signature (which can use a health worker's unique identifier, cryptographic signature, or other form of health worker ID)"/>
			<min value="0"/>
			<max value="*"/>
			<type>
				<code value="Signature"/>
			</type>
		<mapping>
				<identity value="fhir-ig"/>
				<map value="Immunization.conformsTo('http://hl7.eu/fhir/poc/svc/StructureDefinition/Immunization-svc').performer"/>
			</mapping>
						<mapping>
				<identity value="fhir-ig"/>
				<map value="Composition.conformsTo('http://hl7.eu/fhir/poc/svc/StructureDefinition/Composition-svc').attester.party"/>
			</mapping>
		</element>
		<element id="smartVaccinationCertificate.vaccination.targetDisease">
			<path value="smartVaccinationCertificate.vaccination.targetDisease"/>
			<short value="Vaccinated against"/>
			<definition value="Name of disease vaccinated against (e.g. COVID-19)"/>
			<min value="0"/>
			<max value="*"/>
			<type>
				<code value="CodeableConcept"/>
			</type>
			<mapping>
				<identity value="fhir-ig"/>
				<map value="Immunization.conformsTo('http://hl7.eu/fhir/poc/svc/StructureDefinition/Immunization-svc').protocolApplied.targetDisease"/>
			</mapping>
		</element>
		<element id="smartVaccinationCertificate.vaccination.dateNextDose">
			<path value="smartVaccinationCertificate.vaccination.dateNextDose"/>
			<short value="Due date of next dose"/>
			<definition value="Date on which the next vaccination should be administered"/>
			<min value="0"/>
			<max value="*"/>
			<type>
				<code value="dateTime"/>
			</type>
			<mapping>
				<identity value="fhir-ig"/>
				<map value="ImmunizationRecommendation.recommendation.where(dateCriterion='http://loinc.org#30980-7').value"/>
			</mapping>
		</element>
		<element id="smartVaccinationCertificate.vaccination.countryOfVaccination">
			<path value="smartVaccinationCertificate.vaccination.countryOfVaccination"/>
			<short value="Country of vaccination"/>
			<definition value="The country in which the individual has been vaccinated"/>
			<min value="0"/>
			<max value="*"/>
			<type>
				<code value="CodeableConcept"/>
			</type>
			<mapping>
				<identity value="fhir-ig"/>
				<map value="Immunization.conformsTo('http://hl7.eu/fhir/poc/svc/StructureDefinition/Immunization-svc').location.address.country"/>
			</mapping>
		</element>
		
			<!-- metadata -->
		<element id="smartVaccinationCertificate.metaData">
			<path value="smartVaccinationCertificate.metaData"/>
			<short value="Certificate Metadata"/>
			<definition value="Certificate Metadata"/>
			<min value="1"/>
			<max value="1"/>
			<type>
				<code value="BackboneElement"/>
			</type>
			<!-- <mapping> -->
			<!-- <identity value="fhir-gk"/> -->
			<!-- <map value="Observation.device.identifier"/> -->
			<!-- </mapping> -->
		</element>
		<element id="smartVaccinationCertificate.metaData.issuer">
			<path value="smartVaccinationCertificate.metaData.issuer"/>
			<short value="Certificate Issuer"/>
			<definition value="The authority or authorized organization that issued the vaccination certificate"/>
			<min value="0"/>
			<max value="*"/>
			<type>
				<code value="CodeableConcept"/>
			</type>
			<mapping>
				<identity value="fhir-ig"/>
				<map value="Composition.conformsTo('http://hl7.eu/fhir/poc/svc/StructureDefinition/Composition-svc').attester.party"/>
			</mapping>
		</element>
		<element id="smartVaccinationCertificate.metaData.startValidity">
			<path value="smartVaccinationCertificate.metaData.startValidity"/>
			<short value="Certificate valid from"/>
			<definition value="Vaccine or prophylaxis valid from"/>
			<min value="0"/>
			<max value="1"/>
			<type>
				<code value="dateTime"/>
				<!-- 	<code value="Period"/> -->
			</type>
			<mapping>
				<identity value="fhir-ig"/>
				<map value="Composition.attester.time"/>
			</mapping>
			<mapping>
				<identity value="fhir-ig"/>
				<map value="Build.conformsTo('http://hl7.eu/fhir/poc/svc/StructureDefinition/Build-svc').identifier.period.start"/>
			</mapping>
		</element>
		<element id="smartVaccinationCertificate.metaData.endValidity">
			<path value="smartVaccinationCertificate.metaData.endValidity"/>
			<short value="Certificate valid until"/>
			<definition value="Vaccine or prophylaxis valid until"/>
			<min value="0"/>
			<max value="1"/>
			<type>
				<code value="dateTime"/>
				<!-- 	<code value="Period"/> -->
			</type>
			<mapping>
				<identity value="fhir-ig"/>
				<map value="Build.conformsTo('http://hl7.eu/fhir/poc/svc/StructureDefinition/Build-svc').identifier.period.end"/>
			</mapping>
		</element>
		<element id="smartVaccinationCertificate.metaData.certificateId">
			<path value="smartVaccinationCertificate.metaData.certificateId"/>
			<short value="Certificate identifier"/>
			<definition value="Unique identifier for the vaccination certificate"/>
			<min value="0"/>
			<max value="*"/>
			<type>
				<code value="Identifier"/>
			</type>
			<mapping>
				<identity value="fhir-ig"/>
				<map value="Build.conformsTo('http://hl7.eu/fhir/poc/svc/StructureDefinition/Build-svc').identifier"/>
			</mapping>
			<mapping>
				<identity value="fhir-ig"/>
				<map value="Composition.conformsTo('http://hl7.eu/fhir/poc/svc/StructureDefinition/Composition-svc').identifier"/>
			</mapping>
		</element>
		<element id="smartVaccinationCertificate.metaData.certificateStatus">
			<path value="smartVaccinationCertificate.metaData.certificateStatus"/>
			<short value="Status of certificate validity"/>
			<definition value="The validity status of the certificate"/>
			<min value="0"/>
			<max value="*"/>
			<type>
				<code value="CodeableConcept"/>
			</type>
			<mapping>
				<identity value="fhir-ig"/>
				<map value="To be analyzed"/>
			</mapping>
		</element>
		<element id="smartVaccinationCertificate.metaData.certificateSchemaVersion">
			<path value="smartVaccinationCertificate.metaData.certificateSchemaVersion"/>
			<short value="Certificate schema version"/>
			<definition value="Version of this minimum dataset definition - currently set at 1.0.0"/>
			<min value="0"/>
			<max value="*"/>
			<type>
				<code value="Identifier"/>
			</type>
		</element>
	</differential>
</StructureDefinition>
